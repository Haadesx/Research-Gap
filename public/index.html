<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research Gap Identifier</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="js/lib/anime.min.js"></script>
    <!-- Add particles.js for background effects -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</head>
<body>
    <!-- Add particle background container -->
    <div id="particles-js" class="particles-container"></div>

    <!-- New HYPER REALISTIC Lens Transition Overlay -->
    <div id="lens-overlay" class="lens-overlay hidden">
        <div class="lens-assembly">
            <div class="lens-rings">
                <div class="ring ring-1"></div> <!-- Outer Barrel -->
                <div class="ring ring-2"></div> <!-- Focus Ring -->
                <div class="ring ring-3"></div> <!-- Aperture Ring -->
                <div class="ring ring-4"></div> <!-- Front Element Ring -->
            </div>
            <div class="aperture">
                <!-- Inner Lens Element -->
                <div class="inner-lens"></div>
                <!-- Aperture Blades -->
                <div class="aperture-blade-container">
                    <!-- 6 Blades -->
                    <div class="aperture-blade aperture-blade-1"></div>
                    <div class="aperture-blade aperture-blade-2"></div>
                    <div class="aperture-blade aperture-blade-3"></div>
                    <div class="aperture-blade aperture-blade-4"></div>
                    <div class="aperture-blade aperture-blade-5"></div>
                    <div class="aperture-blade aperture-blade-6"></div>
                </div>
                <!-- Lens Glare Effect -->
                <div class="lens-glare"></div>
            </div>
            <div class="lens-content">
                <div class="lens-spinner"></div>
                <p class="lens-status-text">Analyzing...</p>
            </div>
        </div>
    </div>
    <!-- End Lens Overlay -->

    <!-- History Side Panel -->
    <div id="history-side-panel" class="side-panel">
        <button id="toggle-history-panel-btn" class="panel-toggle-btn" aria-label="Toggle History Panel">
            <i class="fas fa-history"></i>
        </button>
        <div class="panel-content">
            <h3>Analysis History</h3>
            <div id="side-history-list">
                <!-- History items will load here -->
                <p class="no-history">No history yet.</p> 
            </div>
        </div>
    </div>
    <!-- End History Side Panel -->

    <header>
        <div class="container">
            <h1 class="animate-title">Research Gap Identifier</h1>
            <p class="animate-subtitle lead">Upload multiple research papers and identify potential research gaps using AI</p>
            <div id="auth-container" class="animate-fade">
                <!-- Auth status will be displayed here -->
            </div>
        </div>
    </header>

    <main class="container">
        <section id="login-section">
            <div class="login-container animate-scale">
                <h2>Sign in to use Research Gap Identifier</h2>
                <p>Sign in with your Google account to analyze research papers</p>
                <a href="/auth/google" class="google-login-btn animate-button">
                    <i class="fab fa-google"></i> Sign in with Google
                </a>
                <div class="rate-limit-info animate-up">
                    <h3>Free Tier Limits</h3>
                    <p>Free tier users are limited to 5 requests per minute and 25 requests per day.</p>
                    <p>The application uses Gemini 2.5 Pro Preview API which offers advanced research gap analysis capabilities.</p>
                    <p>If primary model limits are reached, the system will automatically try alternative models including Gemini 2.0 Flash Thinking and Gemini 1.5 Pro.</p>
                </div>
            </div>
        </section>

        <section id="upload-section" class="hidden animate-section">
            <h2 class="animate-title">Upload Research Papers</h2>
            <div class="upload-container">
                <div id="drop-area" class="animate-scale">
                    <p>Drag & drop your research papers here</p>
                    <p>or</p>
                    <label for="file-input" class="btn animate-button">Select Files</label>
                    <input type="file" id="file-input" accept=".pdf,.txt,.doc,.docx" multiple hidden>
                </div>
            </div>
            <div id="file-list" class="file-list animate-up">
                <h3>Uploaded Papers <span id="file-count">(0)</span></h3>
                <ul id="uploaded-files"></ul>
            </div>
            <button id="analyze-btn" class="btn btn-primary animate-button" disabled>Analyze Papers</button>
        </section>

        <section id="results-section" class="hidden animate-section">
            <h2 class="animate-title">Research Gap Analysis</h2>
            <div class="loading hidden animate-scale">
                <div class="spinner"></div>
                <p>Analyzing your research papers...</p>
            </div>
            <div id="results-container" class="animate-stagger">
                <!-- Results will be displayed here -->
            </div>
            
            <div class="button-container animate-up">
                <button id="new-analysis-btn" class="btn animate-button">Start New Analysis</button>
            </div>
        </section>
    </main>

    <footer class="animate-fade">
        <div class="container">
            <p>&copy; 2025 Varesh Patel. All rights reserved.</p>
            <p class="license-text">Licensed under MIT License. This software is provided "as is", without warranty of any kind, express or implied. In no event shall the author be liable for any claim, damages or other liability arising from the use of this software.</p>
        </div>
    </footer>

    <!-- PDF.js CDN Links -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <script>
        // Configure PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';
    </script>
    <script src="js/main.js"></script>
    <script src="js/animations.js"></script>
</body>
</html> 